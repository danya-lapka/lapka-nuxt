@use 'sass:list';
@use '../variables' as *;

// Maximum number of grid columns/rows
$max: 6;

// Inline grid class
.gi {
  display: inline-grid;
}

// Masonry grid mixin
@mixin masonry($columns, $gap) {
  display: grid;
  grid-template-columns: repeat($columns, 1fr);
  gap: $gap * $n;
  align-items: start;

  // Masonry layout support
  @supports (grid-template-rows: masonry) {
    grid-template-rows: masonry;
  }

  // Fallback for browsers that don't support masonry layout
  @supports not (grid-template-rows: masonry) {
    display: block;
    column-count: $columns;
    column-gap: $gap * $n;

    > * {
      break-inside: avoid;
      margin-bottom: $gap * $n;
      width: 100%;
    }
  }
}

// Generate grid classes
@for $i from 1 through $max {
  .gc-#{$i} { // grid-template-columns
    display: grid;
    grid-template-columns: repeat(#{$i}, 1fr);
  }
  .gr-#{$i} { // grid-template-rows
    display: grid;
    grid-template-rows: repeat(#{$i}, 1fr);
  }

  // Generate masonry grid classes
  @for $j from 0 through 32 {
    .gm-#{$i}-#{$j*2} { // masonry grid with columns and gap
      @include masonry($i, $j*2);
    }
  }
}
